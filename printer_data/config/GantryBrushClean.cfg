[gcode_macro _CLEAN_NOZZLE_GANTRY]
gcode:
    SAVE_GCODE_STATE NAME=clean_nozzle_gantry

    {% set z_hop = printer.gcode_move.position.z + 10.0 %}

    G90                             ; ensure absolute mode
    G1 Z{z_hop:.2f} F3000           ; lift Z safely
    G1 X31 F18000
    G1 Y349 F18000
    G1 X16 F18000                  ; left brush
    G1 X46 F18000                  ; right brush
    G1 Y349 F18000
    G1 X16 F18000
    G1 X46 F18000

    RESTORE_GCODE_STATE NAME=clean_nozzle_gantry